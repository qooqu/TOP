(()=>{"use strict";var t={521:(t,e,r)=>{r.d(e,{Z:()=>a});const o=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},n=function(t){t.preventDefault();let e=t.target.id.split("-"),r=e[0],o=e[1],n=e[2];if("project"==r&&("select"==o&&(a.currentProject=a.projects[n],i()),"remove"==o&&(n==a.currentProject.title?(delete a.projects[n],a.currentProject=a.projects[Object.keys(a.projects).sort()[0]]):delete a.projects[n],i())),"todo"==r){let t=a.currentProject.todos[n];if("details"==o&&document.getElementById(`todo-dtls-${t.title}`).classList.toggle("hidden"),"edit"==o){let e=document.getElementById(`todo-li-${t.title}`);e.querySelectorAll("*").forEach((t=>t.remove())),e.appendChild(function(t){let e=document.createElement("form");e.id=`edit-todo-${t.title}`;let r=document.createElement("input");r.type="text",r.name="title",r.value=t.title;let o=document.createElement("input");o.type="text",o.name="description",o.value=t.description;let n=document.createElement("input");n.type="text",n.name="dueDate",n.value=t.dueDate;let l=document.createElement("input");l.type="text",l.name="priority",l.value=t.priority;let c=document.createElement("input");return c.type="submit",c.value="submit",e.appendChild(r),e.appendChild(o),e.appendChild(n),e.appendChild(l),e.appendChild(c),e.addEventListener("submit",u.editTodoSubmit,!0),e}(t))}"remove"==o&&(delete a.currentProject.todos[n],i())}},l=()=>{let t=Object.keys(a.projects).sort().map((t=>a.projects[t]));o(a.projectList),t.forEach((t=>{a.projectList.appendChild(((t,...e)=>{let r=document.createElement("li"),o=document.createElement("span");return o.textContent=t.title,a.currentProject.title==t.title&&(o.style.fontWeight="bold"),r.appendChild(o),e.forEach((e=>{let o=document.createElement("button");o.setAttribute("id",`project-${e}-${t.title}`),o.textContent=e,o.addEventListener("click",n),r.appendChild(o)})),r})(t,"select","remove"))}))},c=()=>{let t=Object.keys(a.currentProject.todos).sort().map((t=>a.currentProject.todos[t]));o(a.todoList),t.forEach((t=>{a.todoList.appendChild(((t,...e)=>{let r=document.createElement("li");r.setAttribute("id",`todo-li-${t.title}`);let o=document.createElement("span");o.textContent=`${t.title} ${t.description}`;let l=document.createElement("span");return l.setAttribute("id",`todo-dtls-${t.title}`),l.textContent=` ${t.dueDate} ${t.priority}`,l.classList.add("hidden"),r.appendChild(o),r.appendChild(l),e.forEach((e=>{let o=document.createElement("button");o.setAttribute("id",`todo-${e}-${t.title}`),o.textContent=e,o.addEventListener("click",n),r.appendChild(o)})),r})(t,"details","edit","remove"))}))},i=()=>{l(),c(),localStorage.projects=JSON.stringify(a.projects)};class d{constructor(t){this.title=t,this.todos={}}}class s{constructor(t,e,r,o){this.title=t,this.description=e,this.dueDate=r,this.priority=o}}const u={newProjectSubmit:function(t){t.preventDefault();let e=t.target.title.value;""==e||projects[e]||(a.projects[e]=new d(e)),a.currentProject=a.projects[e],i()},newTodoSubmit:function(t){t.preventDefault();let e=t.target.title.value,r=t.target.description.value,o=t.target.dueDate.value,n=t.target.priority.value;""==e||null==a.currentProject||a.currentProject.todos[e]||(a.currentProject.todos[e]=new s(e,r,o,n)),i()},editTodoSubmit:function(t){t.preventDefault();let e=t.target.id.split("-")[2];console.log(t.target);let r=t.target.title.value,o=t.target.description.value,n=t.target.dueDate.value,l=t.target.priority.value;""!=r&&null!=a.currentProject&&(delete a.currentProject.todos[e],a.currentProject.todos[r]=new s(r,o,n,l)),i()}};document.getElementById("new-project").addEventListener("submit",u.newProjectSubmit,!0),document.getElementById("new-todo").addEventListener("submit",u.newTodoSubmit,!0);const a={projects:null,currentProject:null,projectList:document.getElementById("project-list"),todoList:document.getElementById("todo-list")};localStorage.projects?(a.projects=JSON.parse(localStorage.projects),a.currentProject=a.projects[Object.keys(a.projects).sort()[0]]):a.projects={},i()}},e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r(521)})();